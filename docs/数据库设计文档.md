# ERP系统数据库设计文档

## 1. 文档概述

### 1.1 文档目的
本文档定义了ERP系统的数据库设计，包括表结构、字段定义、索引设计和关系定义。旨在为后端开发和数据库管理员提供明确的数据库设计规范，确保系统数据模型的一致性和完整性。

### 1.2 术语定义
| 术语 | 解释 |
|------|------|
| ERP | 企业资源规划（Enterprise Resource Planning），集成管理企业业务流程的系统 |
| CRM | 客户关系管理（Customer Relationship Management），管理与客户之间关系的系统 |
| HR | 人力资源（Human Resources），企业中负责员工管理的部门 |
| BOM | 物料清单（Bill of Materials），描述产品组成的清单 |
| MPS | 主生产计划（Master Production Schedule），企业生产计划的核心部分 |
| MRP | 物料需求计划（Material Requirements Planning），根据生产计划计算物料需求的系统 |
| WIP | 在制品（Work in Process），正在生产过程中的产品 |
| MO | 生产订单（Manufacturing Order），企业下达的生产任务 |

## 2. 数据库设计原则

### 2.1 设计范式
- 遵循第三范式（3NF），确保数据的一致性和完整性
- 合理使用冗余字段，优化查询性能
- 适当使用索引，提高查询效率

### 2.2 命名规范
- 表名：使用小写字母，单词之间用下划线分隔，采用模块名前缀
- 字段名：使用小写字母，单词之间用下划线分隔
- 索引名：使用idx_表名_字段名格式
- 外键名：使用fk_表名_关联表名格式

### 2.3 数据类型选择
- 字符串：根据实际需求选择VARCHAR或TEXT
- 数字：根据范围选择INT、BIGINT、DECIMAL等
- 日期时间：使用DATETIME或TIMESTAMP
- 布尔值：使用TINYINT(1)

## 3. 数据库表结构设计

### 3.1 客户关系管理（CRM）模块

#### 3.1.1 客户表（crm_accounts）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 客户ID |
| account_no | VARCHAR | 20 | UNIQUE NOT NULL | 客户编号 |
| name | VARCHAR | 100 | NOT NULL | 客户名称 |
| type | VARCHAR | 20 | NOT NULL | 客户类型（corporate, individual, government） |
| industry | VARCHAR | 50 | | 行业 |
| region | VARCHAR | 50 | | 地区 |
| address | VARCHAR | 255 | | 地址 |
| contact_person | VARCHAR | 50 | | 联系人姓名 |
| phone | VARCHAR | 20 | | 电话 |
| email | VARCHAR | 100 | | 邮箱 |
| website | VARCHAR | 255 | | 网站 |
| tax_no | VARCHAR | 30 | | 税务登记号 |
| credit_limit | DECIMAL | 18,2 | DEFAULT 0 | 信用额度 |
| credit_used | DECIMAL | 18,2 | DEFAULT 0 | 已使用信用额度 |
| loyalty_level | VARCHAR | 20 | DEFAULT 'bronze' | 忠诚度等级 |
| remarks | TEXT | | | 备注 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.1.2 联系人表（crm_contacts）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 联系人ID |
| account_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| name | VARCHAR | 50 | NOT NULL | 联系人姓名 |
| position | VARCHAR | 50 | | 职位 |
| phone | VARCHAR | 20 | | 电话 |
| email | VARCHAR | 100 | | 邮箱 |
| mobile | VARCHAR | 20 | | 手机 |
| fax | VARCHAR | 20 | | 传真 |
| address | VARCHAR | 255 | | 地址 |
| birthday | DATE | | | 生日 |
| preferences | TEXT | | | 偏好 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.1.3 客户活动表（crm_activities）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 活动ID |
| account_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| contact_id | VARCHAR | 36 | FOREIGN KEY | 联系人ID |
| type | VARCHAR | 20 | NOT NULL | 活动类型（call, meeting, email, note） |
| subject | VARCHAR | 200 | NOT NULL | 活动主题 |
| description | TEXT | | | 活动描述 |
| location | VARCHAR | 255 | | 活动地点 |
| status | VARCHAR | 20 | DEFAULT 'planned' | 状态（planned, completed, cancelled） |
| priority | VARCHAR | 20 | DEFAULT 'medium' | 优先级（low, medium, high, urgent） |
| start_time | DATETIME | | NOT NULL | 开始时间 |
| end_time | DATETIME | | NOT NULL | 结束时间 |
| outcome | TEXT | | | 活动结果 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.1.4 客户反馈表（crm_cases）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 反馈ID |
| case_no | VARCHAR | 20 | UNIQUE NOT NULL | 反馈编号 |
| account_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| contact_id | VARCHAR | 36 | FOREIGN KEY | 联系人ID |
| subject | VARCHAR | 200 | NOT NULL | 主题 |
| description | TEXT | | NOT NULL | 描述 |
| type | VARCHAR | 20 | NOT NULL | 类型（question, complaint, suggestion, issue） |
| priority | VARCHAR | 20 | DEFAULT 'medium' | 优先级（low, medium, high, urgent） |
| status | VARCHAR | 20 | DEFAULT 'new' | 状态（new, in_progress, resolved, closed） |
| resolution | TEXT | | | 解决方案 |
| response_time | DATETIME | | | 响应时间 |
| resolution_time | DATETIME | | | 解决时间 |
| satisfaction | TINYINT | 1 | | 满意度（1-5） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.1.5 客户反馈评论表（crm_case_comments）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 评论ID |
| case_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 反馈ID |
| content | TEXT | | NOT NULL | 评论内容 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |

#### 3.1.6 销售线索表（crm_leads）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 线索ID |
| name | VARCHAR | 100 | NOT NULL | 线索名称 |
| company | VARCHAR | 100 | | 公司名称 |
| contact_person | VARCHAR | 50 | | 联系人姓名 |
| phone | VARCHAR | 20 | | 电话 |
| email | VARCHAR | 100 | | 邮箱 |
| source | VARCHAR | 50 | | 来源（website, referral, event, cold_call） |
| status | VARCHAR | 20 | DEFAULT 'new' | 状态（new, qualified, unqualified, converted） |
| score | TINYINT | 3 | DEFAULT 0 | 线索评分 |
| description | TEXT | | | 描述 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.1.7 销售机会表（crm_opportunities）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 机会ID |
| opportunity_no | VARCHAR | 20 | UNIQUE NOT NULL | 机会编号 |
| account_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| name | VARCHAR | 200 | NOT NULL | 机会名称 |
| description | TEXT | | | 描述 |
| stage | VARCHAR | 50 | DEFAULT 'prospecting' | 阶段（prospecting, qualification, proposal, negotiation, closed_won, closed_lost） |
| probability | TINYINT | 3 | DEFAULT 0 | 成功率（0-100） |
| estimated_amount | DECIMAL | 18,2 | DEFAULT 0 | 预估金额 |
| actual_amount | DECIMAL | 18,2 | | 实际金额 |
| close_date | DATE | | NOT NULL | 预计关闭日期 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.1.8 营销活动表（crm_campaigns）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 活动ID |
| campaign_no | VARCHAR | 20 | UNIQUE NOT NULL | 活动编号 |
| name | VARCHAR | 200 | NOT NULL | 活动名称 |
| type | VARCHAR | 50 | NOT NULL | 活动类型（email, social, event, advertisement） |
| description | TEXT | | | 描述 |
| status | VARCHAR | 20 | DEFAULT 'planning' | 状态（planning, active, completed, cancelled） |
| start_date | DATE | | NOT NULL | 开始日期 |
| end_date | DATE | | NOT NULL | 结束日期 |
| budget | DECIMAL | 18,2 | DEFAULT 0 | 预算 |
| actual_cost | DECIMAL | 18,2 | DEFAULT 0 | 实际成本 |
| target_audience | VARCHAR | 255 | | 目标受众 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

### 3.2 销售模块

#### 3.2.1 客户表（sales_customers）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 客户ID |
| customer_no | VARCHAR | 20 | UNIQUE NOT NULL | 客户编号 |
| name | VARCHAR | 100 | NOT NULL | 客户名称 |
| contact_person | VARCHAR | 50 | | 联系人 |
| phone | VARCHAR | 20 | | 电话 |
| email | VARCHAR | 100 | | 邮箱 |
| address | VARCHAR | 255 | | 地址 |
| tax_no | VARCHAR | 30 | | 税号 |
| bank_name | VARCHAR | 100 | | 银行名称 |
| bank_account | VARCHAR | 50 | | 银行账号 |
| category | VARCHAR | 50 | | 客户类别 |
| region | VARCHAR | 50 | | 地区 |
| credit_limit | DECIMAL | 18,2 | DEFAULT 0 | 信用额度 |
| credit_days | INT | | DEFAULT 0 | 信用天数 |
| remarks | TEXT | | | 备注 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.2 产品表（sales_products）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 产品ID |
| product_no | VARCHAR | 20 | UNIQUE NOT NULL | 产品编号 |
| name | VARCHAR | 100 | NOT NULL | 产品名称 |
| description | TEXT | | | 产品描述 |
| category_id | VARCHAR | 36 | FOREIGN KEY | 产品类别ID |
| unit | VARCHAR | 10 | NOT NULL | 单位 |
| price | DECIMAL | 18,2 | NOT NULL | 销售价格 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.3 产品类别表（sales_product_categories）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 类别ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 类别编码 |
| name | VARCHAR | 100 | NOT NULL | 类别名称 |
| parent_id | VARCHAR | 36 | FOREIGN KEY | 父类别ID |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.4 销售报价单表（sales_quotes）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 报价单ID |
| quote_no | VARCHAR | 20 | UNIQUE NOT NULL | 报价单编号 |
| customer_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| quote_date | DATE | | NOT NULL | 报价日期 |
| valid_until | DATE | | NOT NULL | 有效期至 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| status | VARCHAR | 20 | DEFAULT 'draft' | 状态（draft, submitted, approved, expired, cancelled） |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.5 销售报价单明细表（sales_quote_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| quote_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 报价单ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| discount | DECIMAL | 18,2 | DEFAULT 0 | 折扣 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.6 销售订单表（sales_orders）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 订单ID |
| order_no | VARCHAR | 20 | UNIQUE NOT NULL | 订单编号 |
| customer_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| order_date | DATE | | NOT NULL | 订单日期 |
| delivery_date | DATE | | | 交货日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, confirmed, shipped, invoiced, cancelled） |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.7 销售订单明细表（sales_order_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| discount | DECIMAL | 18,2 | DEFAULT 0 | 折扣 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| shipped_quantity | DECIMAL | 18,4 | DEFAULT 0 | 已发货数量 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.8 销售发货单表（sales_deliveries）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 发货单ID |
| delivery_no | VARCHAR | 20 | UNIQUE NOT NULL | 发货单编号 |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| customer_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| delivery_date | DATE | | NOT NULL | 发货日期 |
| total_quantity | DECIMAL | 18,4 | NOT NULL | 总数量 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, shipped, cancelled） |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.9 销售发货单明细表（sales_delivery_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| delivery_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 发货单ID |
| order_item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单明细ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 发货数量 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.10 销售发票表（sales_invoices）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 发票ID |
| invoice_no | VARCHAR | 20 | UNIQUE NOT NULL | 发票编号 |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| customer_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| invoice_date | DATE | | NOT NULL | 开票日期 |
| due_date | DATE | | NOT NULL | 到期日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| paid_amount | DECIMAL | 18,2 | DEFAULT 0 | 已付金额 |
| status | VARCHAR | 20 | DEFAULT 'unpaid' | 状态（unpaid, partially_paid, paid, cancelled） |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.11 销售发票明细表（sales_invoice_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| invoice_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 发票ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| discount | DECIMAL | 18,2 | DEFAULT 0 | 折扣 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.12 销售退货单表（sales_returns）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 退货单ID |
| return_no | VARCHAR | 20 | UNIQUE NOT NULL | 退货单编号 |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| customer_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| return_date | DATE | | NOT NULL | 退货日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, approved, processed, cancelled） |
| reason | TEXT | | | 退货原因 |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.13 销售退货单明细表（sales_return_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| return_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 退货单ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 退货数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.2.14 客户信用评估表（sales_customer_credits）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 评估ID |
| customer_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 客户ID |
| evaluation_date | DATE | | NOT NULL | 评估日期 |
| credit_score | INT | | NOT NULL | 信用评分 |
| risk_level | VARCHAR | 20 | NOT NULL | 风险等级（low, medium, high） |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

### 3.3 库存模块

#### 3.3.1 仓库表（inventory_warehouses）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 仓库ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 仓库编码 |
| name | VARCHAR | 100 | NOT NULL | 仓库名称 |
| type | VARCHAR | 20 | NOT NULL | 仓库类型（raw_material, finished_goods, semi_finished, tools） |
| address | VARCHAR | 255 | | 仓库地址 |
| region | VARCHAR | 50 | | 地区 |
| contact | VARCHAR | 50 | | 联系人 |
| phone | VARCHAR | 20 | | 联系电话 |
| description | TEXT | | | 仓库描述 |
| capacity | INT | | DEFAULT 0 | 容量 |
| used_capacity | INT | | DEFAULT 0 | 已使用容量 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.3.2 库位表（inventory_locations）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 库位ID |
| warehouse_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 仓库ID |
| code | VARCHAR | 20 | NOT NULL | 库位编码 |
| name | VARCHAR | 100 | NOT NULL | 库位名称 |
| type | VARCHAR | 20 | | 库位类型 |
| capacity | DECIMAL | 18,4 | | 容量 |
| used_capacity | DECIMAL | 18,4 | DEFAULT 0 | 已使用容量 |
| status | VARCHAR | 20 | DEFAULT 'available' | 状态（available, occupied, blocked） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.3.3 物料表（inventory_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 物料ID |
| item_no | VARCHAR | 20 | UNIQUE NOT NULL | 物料编号 |
| name | VARCHAR | 100 | NOT NULL | 物料名称 |
| description | TEXT | | | 物料描述 |
| category_id | VARCHAR | 36 | FOREIGN KEY | 物料类别ID |
| unit | VARCHAR | 10 | NOT NULL | 单位 |
| type | VARCHAR | 20 | NOT NULL | 物料类型（raw_material, finished_goods, semi_finished, tool） |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive, obsolete） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.3.4 物料类别表（inventory_item_categories）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 类别ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 类别编码 |
| name | VARCHAR | 100 | NOT NULL | 类别名称 |
| parent_id | VARCHAR | 36 | FOREIGN KEY | 父类别ID |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.3.5 库存表（inventory_on_hand）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 库存ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| warehouse_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 仓库ID |
| location_id | VARCHAR | 36 | FOREIGN KEY | 库位ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit_cost | DECIMAL | 18,2 | NOT NULL | 单位成本 |
| total_cost | DECIMAL | 18,2 | NOT NULL | 总成本 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.3.6 库存交易表（inventory_transactions）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 交易ID |
| transaction_no | VARCHAR | 20 | UNIQUE NOT NULL | 交易编号 |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| warehouse_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 仓库ID |
| location_id | VARCHAR | 36 | FOREIGN KEY | 库位ID |
| type | VARCHAR | 20 | NOT NULL | 交易类型（purchase, sales, transfer, adjustment, production） |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit_cost | DECIMAL | 18,2 | NOT NULL | 单位成本 |
| total_cost | DECIMAL | 18,2 | NOT NULL | 总成本 |
| reference_type | VARCHAR | 50 | | 参考类型（purchase_order, sales_order, transfer_order, etc.） |
| reference_id | VARCHAR | 36 | | 参考ID |
| transaction_date | DATETIME | | NOT NULL | 交易日期 |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |

#### 3.3.7 库存盘点表（inventory_counts）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 盘点ID |
| count_no | VARCHAR | 20 | UNIQUE NOT NULL | 盘点编号 |
| warehouse_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 仓库ID |
| count_date | DATE | | NOT NULL | 盘点日期 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, in_progress, completed, cancelled） |
| total_items | INT | | NOT NULL | 总物料数 |
| total_variance | DECIMAL | 18,2 | DEFAULT 0 | 总差异金额 |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.3.8 库存盘点明细表（inventory_count_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| count_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 盘点ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| location_id | VARCHAR | 36 | FOREIGN KEY | 库位ID |
| system_quantity | DECIMAL | 18,4 | NOT NULL | 系统数量 |
| actual_quantity | DECIMAL | 18,4 | NOT NULL | 实际数量 |
| variance_quantity | DECIMAL | 18,4 | NOT NULL | 差异数量 |
| unit_cost | DECIMAL | 18,2 | NOT NULL | 单位成本 |
| variance_amount | DECIMAL | 18,2 | NOT NULL | 差异金额 |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

### 3.4 采购模块

#### 3.4.1 供应商表（purchase_vendors）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 供应商ID |
| vendor_no | VARCHAR | 20 | UNIQUE NOT NULL | 供应商编号 |
| name | VARCHAR | 100 | NOT NULL | 供应商名称 |
| contact_person | VARCHAR | 50 | | 联系人 |
| phone | VARCHAR | 20 | | 电话 |
| email | VARCHAR | 100 | | 邮箱 |
| address | VARCHAR | 255 | | 地址 |
| tax_no | VARCHAR | 30 | | 税号 |
| bank_name | VARCHAR | 100 | | 银行名称 |
| bank_account | VARCHAR | 50 | | 银行账号 |
| category | VARCHAR | 50 | | 供应商类别 |
| credit_limit | DECIMAL | 18,2 | DEFAULT 0 | 信用额度 |
| lead_time | INT | | DEFAULT 0 | 前置时间（天） |
| payment_terms | VARCHAR | 50 | | 付款条件 |
| remarks | TEXT | | | 备注 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.2 采购计划体表（purchase_plans）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 计划ID |
| plan_no | VARCHAR | 20 | UNIQUE NOT NULL | 计划编号 |
| name | VARCHAR | 100 | NOT NULL | 计划名称 |
| description | TEXT | | | 计划描述 |
| start_date | DATE | | NOT NULL | 开始日期 |
| end_date | DATE | | NOT NULL | 结束日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| status | VARCHAR | 20 | DEFAULT 'draft' | 状态（draft, approved, executed, cancelled） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.3 采购计划表明细表（purchase_plan_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| plan_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 计划ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| estimated_price | DECIMAL | 18,2 | NOT NULL | 预估价格 |
| estimated_amount | DECIMAL | 18,2 | NOT NULL | 预估金额 |
| need_date | DATE | | NOT NULL | 需求日期 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.4 采购订单表（purchase_orders）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 订单ID |
| order_no | VARCHAR | 20 | UNIQUE NOT NULL | 订单编号 |
| vendor_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 供应商ID |
| order_date | DATE | | NOT NULL | 订单日期 |
| delivery_date | DATE | | | 交货日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, approved, delivered, invoiced, cancelled） |
| payment_terms | VARCHAR | 50 | | 付款条件 |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.5 采购订单明细表（purchase_order_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| discount | DECIMAL | 18,2 | DEFAULT 0 | 折扣 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| received_quantity | DECIMAL | 18,4 | DEFAULT 0 | 已收货数量 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.6 采购收货单表（purchase_receipts）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 收货单ID |
| receipt_no | VARCHAR | 20 | UNIQUE NOT NULL | 收货单编号 |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| vendor_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 供应商ID |
| receipt_date | DATE | | NOT NULL | 收货日期 |
| total_quantity | DECIMAL | 18,4 | NOT NULL | 总数量 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, received, cancelled） |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.7 采购收货单明细表（purchase_receipt_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| receipt_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 收货单ID |
| order_item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单明细ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 收货数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| warehouse_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 仓库ID |
| location_id | VARCHAR | 36 | FOREIGN KEY | 库位ID |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.8 采购发票表（purchase_invoices）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 发票ID |
| invoice_no | VARCHAR | 20 | UNIQUE NOT NULL | 发票编号 |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| vendor_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 供应商ID |
| invoice_date | DATE | | NOT NULL | 开票日期 |
| due_date | DATE | | NOT NULL | 到期日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| paid_amount | DECIMAL | 18,2 | DEFAULT 0 | 已付金额 |
| status | VARCHAR | 20 | DEFAULT 'unpaid' | 状态（unpaid, partially_paid, paid, cancelled） |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.9 采购发票明细表（purchase_invoice_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| invoice_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 发票ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| discount | DECIMAL | 18,2 | DEFAULT 0 | 折扣 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.10 采购退货单表（purchase_returns）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 退货单ID |
| return_no | VARCHAR | 20 | UNIQUE NOT NULL | 退货单编号 |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 订单ID |
| vendor_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 供应商ID |
| return_date | DATE | | NOT NULL | 退货日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总金额 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, approved, processed, cancelled） |
| reason | TEXT | | | 退货原因 |
| remarks | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.4.11 采购退货单明细表（purchase_return_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| return_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 退货单ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 退货数量 |
| unit_price | DECIMAL | 18,2 | NOT NULL | 单价 |
| amount | DECIMAL | 18,2 | NOT NULL | 金额 |
| warehouse_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 仓库ID |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

### 3.5 财务模块

#### 3.5.1 会计科目表（finance_accounts）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 科目ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 科目编码 |
| name | VARCHAR | 100 | NOT NULL | 科目名称 |
| type | VARCHAR | 20 | NOT NULL | 科目类型（asset, liability, equity, revenue, expense） |
| level | INT | | NOT NULL | 科目级别 |
| parent_id | VARCHAR | 36 | FOREIGN KEY | 父科目ID |
| category | VARCHAR | 50 | | 科目类别 |
| description | TEXT | | | 科目描述 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.5.2 凭证表（finance_journals）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 凭证ID |
| journal_no | VARCHAR | 20 | UNIQUE NOT NULL | 凭证编号 |
| date | DATE | | NOT NULL | 凭证日期 |
| reference | VARCHAR | 100 | | 参考号 |
| description | TEXT | | | 凭证描述 |
| total_debit | DECIMAL | 18,2 | NOT NULL | 借方合计 |
| total_credit | DECIMAL | 18,2 | NOT NULL | 贷方合计 |
| status | VARCHAR | 20 | DEFAULT 'draft' | 状态（draft, posted, cancelled） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.5.3 凭证明细表（finance_journal_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| journal_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 凭证ID |
| account_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 科目ID |
| description | TEXT | | | 明细描述 |
| debit | DECIMAL | 18,2 | DEFAULT 0 | 借方金额 |
| credit | DECIMAL | 18,2 | DEFAULT 0 | 贷方金额 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.5.4 固定资产表（finance_fixed_assets）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 资产ID |
| asset_no | VARCHAR | 20 | UNIQUE NOT NULL | 资产编号 |
| name | VARCHAR | 100 | NOT NULL | 资产名称 |
| description | TEXT | | | 资产描述 |
| category | VARCHAR | 50 | NOT NULL | 资产类别 |
| acquisition_date | DATE | | NOT NULL | 购置日期 |
| cost | DECIMAL | 18,2 | NOT NULL | 购置成本 |
| salvage_value | DECIMAL | 18,2 | DEFAULT 0 | 残值 |
| useful_life | INT | | NOT NULL | 使用年限（月） |
| depreciation_method | VARCHAR | 50 | NOT NULL | 折旧方法 |
| accumulated_depreciation | DECIMAL | 18,2 | DEFAULT 0 | 累计折旧 |
| net_book_value | DECIMAL | 18,2 | NOT NULL | 净值 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, disposed, sold） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.5.5 预算表（finance_budgets）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 预算ID |
| budget_no | VARCHAR | 20 | UNIQUE NOT NULL | 预算编号 |
| name | VARCHAR | 100 | NOT NULL | 预算名称 |
| description | TEXT | | | 预算描述 |
| start_date | DATE | | NOT NULL | 开始日期 |
| end_date | DATE | | NOT NULL | 结束日期 |
| total_amount | DECIMAL | 18,2 | NOT NULL | 总预算金额 |
| status | VARCHAR | 20 | DEFAULT 'draft' | 状态（draft, approved, executed, closed） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.5.6 预算明细表（finance_budget_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| budget_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 预算ID |
| department_id | VARCHAR | 36 | FOREIGN KEY | 部门ID |
| account_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 科目ID |
| amount | DECIMAL | 18,2 | NOT NULL | 预算金额 |
| description | TEXT | | | 明细描述 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.5.7 成本中心表（finance_cost_centers）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 成本中心ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 成本中心编码 |
| name | VARCHAR | 100 | NOT NULL | 成本中心名称 |
| description | TEXT | | | 成本中心描述 |
| department_id | VARCHAR | 36 | FOREIGN KEY | 部门ID |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

### 3.6 生产模块

#### 3.6.1 主生产计划表（production_mps）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 计划ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 计划数量 |
| start_date | DATE | | NOT NULL | 开始日期 |
| end_date | DATE | | NOT NULL | 结束日期 |
| status | VARCHAR | 20 | DEFAULT 'draft' | 状态（draft, approved, executed, cancelled） |
| description | TEXT | | | 计划描述 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.6.2 物料需求计划表（production_mrp）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 计划ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| requirement_quantity | DECIMAL | 18,4 | NOT NULL | 需求数量 |
| available_quantity | DECIMAL | 18,4 | NOT NULL | 可用数量 |
| net_requirement | DECIMAL | 18,4 | NOT NULL | 净需求数量 |
| start_date | DATE | | NOT NULL | 开始日期 |
| end_date | DATE | | NOT NULL | 结束日期 |
| status | VARCHAR | 20 | DEFAULT 'planned' | 状态（planned, released, cancelled） |
| source | VARCHAR | 100 | | 需求来源 |
| created_at | DATETIME | | NOT NULL | 创建时间 |

#### 3.6.3 物料清单表（production_boms）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | BOM ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| version | VARCHAR | 20 | NOT NULL | 版本号 |
| status | VARCHAR | 20 | DEFAULT 'draft' | 状态（draft, active, inactive） |
| description | TEXT | | | BOM描述 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.6.4 物料清单明细表（production_bom_items）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 明细ID |
| bom_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | BOM ID |
| item_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 物料ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 数量 |
| unit | VARCHAR | 10 | NOT NULL | 单位 |
| usage | VARCHAR | 20 | DEFAULT '100%' | 使用率 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.6.5 生产订单表（production_orders）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 订单ID |
| order_no | VARCHAR | 20 | UNIQUE NOT NULL | 订单编号 |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 订单数量 |
| scheduled_start_date | DATE | | NOT NULL | 计划开始日期 |
| scheduled_end_date | DATE | | NOT NULL | 计划结束日期 |
| actual_start_date | DATE | | | 实际开始日期 |
| actual_end_date | DATE | | | 实际结束日期 |
| bom_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | BOM ID |
| routing_id | VARCHAR | 36 | FOREIGN KEY | 工艺路线ID |
| status | VARCHAR | 20 | DEFAULT 'planned' | 状态（planned, released, in_progress, completed, cancelled） |
| description | TEXT | | | 订单描述 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.6.6 生产工单表（production_work_orders）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 工单ID |
| order_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 生产订单ID |
| operation_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 工序ID |
| work_center_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 工作中心ID |
| quantity | DECIMAL | 18,4 | NOT NULL | 工单数量 |
| scheduled_start_time | DATETIME | | NOT NULL | 计划开始时间 |
| scheduled_end_time | DATETIME | | NOT NULL | 计划结束时间 |
| actual_start_time | DATETIME | | | 实际开始时间 |
| actual_end_time | DATETIME | | | 实际结束时间 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, in_progress, completed, cancelled） |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.6.7 工艺路线表（production_routings）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 工艺路线ID |
| product_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 产品ID |
| version | VARCHAR | 20 | NOT NULL | 版本号 |
| status | VARCHAR | 20 | DEFAULT 'draft' | 状态（draft, active, inactive） |
| description | TEXT | | | 工艺路线描述 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.6.8 工艺路线工序表（production_routing_operations）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 工序ID |
| routing_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 工艺路线ID |
| sequence | INT | | NOT NULL | 工序顺序 |
| operation_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 工序定义ID |
| work_center_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 工作中心ID |
| standard_time | INT | | NOT NULL | 标准时间（秒） |
| setup_time | INT | | NOT NULL | 准备时间（秒） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.6.9 工作中心表（production_work_centers）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 工作中心ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 工作中心编码 |
| name | VARCHAR | 100 | NOT NULL | 工作中心名称 |
| description | TEXT | | | 工作中心描述 |
| capacity | INT | | NOT NULL | 产能 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

### 3.7 人力资源模块

#### 3.7.1 员工表（hr_employees）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 员工ID |
| employee_id | VARCHAR | 20 | UNIQUE NOT NULL | 员工编号 |
| name | VARCHAR | 50 | NOT NULL | 员工姓名 |
| gender | VARCHAR | 10 | | 性别（male, female） |
| birth_date | DATE | | | 出生日期 |
| phone | VARCHAR | 20 | | 电话 |
| email | VARCHAR | 100 | | 邮箱 |
| department_id | VARCHAR | 36 | FOREIGN KEY | 部门ID |
| position_id | VARCHAR | 36 | FOREIGN KEY | 职位ID |
| entry_date | DATE | | NOT NULL | 入职日期 |
| probation_end_date | DATE | | | 试用期结束日期 |
| contract_start_date | DATE | | | 合同开始日期 |
| contract_end_date | DATE | | | 合同结束日期 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, resigned, on_leave） |
| address | VARCHAR | 255 | | 地址 |
| education | VARCHAR | 50 | | 学历 |
| major | VARCHAR | 100 | | 专业 |
| school | VARCHAR | 100 | | 毕业院校 |
| id_card | VARCHAR | 20 | | 身份证号 |
| emergency_contact | VARCHAR | 50 | | 紧急联系人 |
| emergency_phone | VARCHAR | 20 | | 紧急联系电话 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.2 部门表（hr_departments）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 部门ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 部门编码 |
| name | VARCHAR | 100 | NOT NULL | 部门名称 |
| parent_id | VARCHAR | 36 | FOREIGN KEY | 父部门ID |
| manager_id | VARCHAR | 36 | FOREIGN KEY | 部门经理ID |
| description | TEXT | | | 部门描述 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.3 职位表（hr_positions）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 职位ID |
| code | VARCHAR | 20 | UNIQUE NOT NULL | 职位编码 |
| name | VARCHAR | 100 | NOT NULL | 职位名称 |
| department_id | VARCHAR | 36 | FOREIGN KEY | 部门ID |
| description | TEXT | | | 职位描述 |
| status | VARCHAR | 20 | DEFAULT 'active' | 状态（active, inactive） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.4 考勤表（hr_attendances）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 考勤ID |
| employee_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 员工ID |
| attendance_date | DATE | | NOT NULL | 考勤日期 |
| status | VARCHAR | 20 | NOT NULL | 状态（present, absent, late, leave_early, overtime） |
| check_in_time | TIME | | | 签到时间 |
| check_out_time | TIME | | | 签退时间 |
| hours_worked | DECIMAL | 5,2 | | 工作时长 |
| remark | TEXT | | | 备注 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.5 请假表（hr_leaves）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 请假ID |
| leave_no | VARCHAR | 20 | UNIQUE NOT NULL | 请假编号 |
| employee_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 员工ID |
| leave_type | VARCHAR | 20 | NOT NULL | 请假类型（annual, sick, personal, maternity, paternity） |
| start_date | DATE | | NOT NULL | 开始日期 |
| end_date | DATE | | NOT NULL | 结束日期 |
| days | DECIMAL | 5,2 | NOT NULL | 请假天数 |
| reason | TEXT | | NOT NULL | 请假原因 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, approved, rejected, cancelled） |
| approver_id | VARCHAR | 36 | FOREIGN KEY | 审批人ID |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.6 加班表（hr_overtimes）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 加班ID |
| overtime_no | VARCHAR | 20 | UNIQUE NOT NULL | 加班编号 |
| employee_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 员工ID |
| overtime_date | DATE | | NOT NULL | 加班日期 |
| start_time | TIME | | NOT NULL | 开始时间 |
| end_time | TIME | | NOT NULL | 结束时间 |
| hours | DECIMAL | 5,2 | NOT NULL | 加班时长 |
| reason | TEXT | | NOT NULL | 加班原因 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, approved, rejected, cancelled） |
| approver_id | VARCHAR | 36 | FOREIGN KEY | 审批人ID |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.7 薪资表（hr_salaries）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 薪资ID |
| salary_no | VARCHAR | 20 | UNIQUE NOT NULL | 薪资编号 |
| employee_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 员工ID |
| payroll_period | VARCHAR | 20 | NOT NULL | 薪资周期 |
| basic_salary | DECIMAL | 18,2 | NOT NULL | 基本工资 |
| allowance | DECIMAL | 18,2 | DEFAULT 0 | 津贴 |
| bonus | DECIMAL | 18,2 | DEFAULT 0 | 奖金 |
| overtime_pay | DECIMAL | 18,2 | DEFAULT 0 | 加班费 |
| deduction | DECIMAL | 18,2 | DEFAULT 0 | 扣除项 |
| tax | DECIMAL | 18,2 | DEFAULT 0 | 税费 |
| net_salary | DECIMAL | 18,2 | NOT NULL | 实发工资 |
| payment_date | DATE | | NOT NULL | 发放日期 |
| status | VARCHAR | 20 | DEFAULT 'pending' | 状态（pending, paid, cancelled） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.8 培训表（hr_trainings）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 培训ID |
| training_no | VARCHAR | 20 | UNIQUE NOT NULL | 培训编号 |
| name | VARCHAR | 200 | NOT NULL | 培训名称 |
| description | TEXT | | | 培训描述 |
| start_date | DATE | | NOT NULL | 开始日期 |
| end_date | DATE | | NOT NULL | 结束日期 |
| location | VARCHAR | 255 | | 培训地点 |
| trainer | VARCHAR | 100 | | 培训师 |
| status | VARCHAR | 20 | DEFAULT 'planned' | 状态（planned, in_progress, completed, cancelled） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.9 培训参与表（hr_training_participants）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 参与ID |
| training_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 培训ID |
| employee_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 员工ID |
| attendance | VARCHAR | 20 | DEFAULT 'absent' | 出勤情况（present, absent） |
| score | DECIMAL | 5,2 | | 培训成绩 |
| feedback | TEXT | | | 培训反馈 |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.10 招聘申请表（hr_recruitments）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 招聘ID |
| recruitment_no | VARCHAR | 20 | UNIQUE NOT NULL | 招聘编号 |
| position_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 职位ID |
| department_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 部门ID |
| required_number | INT | | NOT NULL | 招聘人数 |
| description | TEXT | | | 招聘描述 |
| requirements | TEXT | | | 招聘要求 |
| status | VARCHAR | 20 | DEFAULT 'open' | 状态（open, closed, cancelled） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

#### 3.7.11 简历表（hr_resumes）
| 字段名 | 数据类型 | 长度 | 约束 | 描述 |
|--------|----------|------|------|------|
| id | VARCHAR | 36 | PRIMARY KEY | 简历ID |
| recruitment_id | VARCHAR | 36 | NOT NULL, FOREIGN KEY | 招聘ID |
| name | VARCHAR | 50 | NOT NULL | 姓名 |
| gender | VARCHAR | 10 | | 性别 |
| birth_date | DATE | | | 出生日期 |
| phone | VARCHAR | 20 | NOT NULL | 电话 |
| email | VARCHAR | 100 | NOT NULL | 邮箱 |
| education | VARCHAR | 50 | | 学历 |
| major | VARCHAR | 100 | | 专业 |
| school | VARCHAR | 100 | | 毕业院校 |
| work_experience | TEXT | | | 工作经验 |
| skills | TEXT | | | 技能 |
| status | VARCHAR | 20 | DEFAULT 'new' | 状态（new, screening, interview, offer, rejected, hired） |
| created_by | VARCHAR | 36 | | 创建人 |
| created_at | DATETIME | | NOT NULL | 创建时间 |
| updated_by | VARCHAR | 36 | | 更新人 |
| updated_at | DATETIME | | NOT NULL | 更新时间 |

## 4. 索引设计

### 4.1 CRM模块索引
- **crm_accounts**：`idx_account_no`（account_no）、`idx_status`（status）
- **crm_contacts**：`idx_account_id`（account_id）、`idx_name`（name）
- **crm_activities**：`idx_account_id`（account_id）、`idx_type`（type）、`idx_status`（status）
- **crm_cases**：`idx_case_no`（case_no）、`idx_account_id`（account_id）、`idx_status`（status）
- **crm_leads**：`idx_status`（status）、`idx_source`（source）
- **crm_opportunities**：`idx_opportunity_no`（opportunity_no）、`idx_account_id`（account_id）、`idx_stage`（stage）
- **crm_campaigns**：`idx_campaign_no`（campaign_no）、`idx_status`（status）

### 4.2 销售模块索引
- **sales_customers**：`idx_customer_no`（customer_no）、`idx_status`（status）
- **sales_products**：`idx_product_no`（product_no）、`idx_status`（status）、`idx_category_id`（category_id）
- **sales_quotes**：`idx_quote_no`（quote_no）、`idx_customer_id`（customer_id）、`idx_status`（status）
- **sales_orders**：`idx_order_no`（order_no）、`idx_customer_id`（customer_id）、`idx_status`（status）
- **sales_deliveries**：`idx_delivery_no`（delivery_no）、`idx_order_id`（order_id）、`idx_status`（status）
- **sales_invoices**：`idx_invoice_no`（invoice_no）、`idx_customer_id`（customer_id）、`idx_status`（status）
- **sales_returns**：`idx_return_no`（return_no）、`idx_order_id`（order_id）、`idx_status`（status）

### 4.3 库存模块索引
- **inventory_warehouses**：`idx_code`（code）、`idx_status`（status）
- **inventory_locations**：`idx_warehouse_id`（warehouse_id）、`idx_code`（code）
- **inventory_items**：`idx_item_no`（item_no）、`idx_status`（status）、`idx_category_id`（category_id）
- **inventory_on_hand**：`idx_item_id`（item_id）、`idx_warehouse_id`（warehouse_id）
- **inventory_transactions**：`idx_transaction_no`（transaction_no）、`idx_item_id`（item_id）、`idx_type`（type）
- **inventory_counts**：`idx_count_no`（count_no）、`idx_warehouse_id`（warehouse_id）、`idx_status`（status）

### 4.4 采购模块索引
- **purchase_vendors**：`idx_vendor_no`（vendor_no）、`idx_status`（status）
- **purchase_plans**：`idx_plan_no`（plan_no）、`idx_status`（status）
- **purchase_orders**：`idx_order_no`（order_no）、`idx_vendor_id`（vendor_id）、`idx_status`（status）
- **purchase_receipts**：`idx_receipt_no`（receipt_no）、`idx_order_id`（order_id）、`idx_status`（status）
- **purchase_invoices**：`idx_invoice_no`（invoice_no）、`idx_vendor_id`（vendor_id）、`idx_status`（status）
- **purchase_returns**：`idx_return_no`（return_no）、`idx_order_id`（order_id）、`idx_status`（status）

### 4.5 财务模块索引
- **finance_accounts**：`idx_code`（code）、`idx_type`（type）、`idx_status`（status）
- **finance_journals**：`idx_journal_no`（journal_no）、`idx_date`（date）、`idx_status`（status）
- **finance_fixed_assets**：`idx_asset_no`（asset_no）、`idx_status`（status）
- **finance_budgets**：`idx_budget_no`（budget_no）、`idx_status`（status）
- **finance_cost_centers**：`idx_code`（code）、`idx_status`（status）

### 4.6 生产模块索引
- **production_mps**：`idx_product_id`（product_id）、`idx_status`（status）
- **production_mrp**：`idx_item_id`（item_id）、`idx_status`（status）
- **production_boms**：`idx_product_id`（product_id）、`idx_status`（status）
- **production_orders**：`idx_order_no`（order_no）、`idx_product_id`（product_id）、`idx_status`（status）
- **production_work_orders**：`idx_order_id`（order_id）、`idx_status`（status）
- **production_routings**：`idx_product_id`（product_id）、`idx_status`（status）
- **production_work_centers**：`idx_code`（code）、`idx_status`（status）

### 4.7 人力资源模块索引
- **hr_employees**：`idx_employee_id`（employee_id）、`idx_department_id`（department_id）、`idx_position_id`（position_id）、`idx_status`（status）
- **hr_departments**：`idx_code`（code）、`idx_status`（status）
- **hr_positions**：`idx_code`（code）、`idx_department_id`（department_id）、`idx_status`（status）
- **hr_attendances**：`idx_employee_id`（employee_id）、`idx_attendance_date`（attendance_date）
- **hr_leaves**：`idx_leave_no`（leave_no）、`idx_employee_id`（employee_id）、`idx_status`（status）
- **hr_overtimes**：`idx_overtime_no`（overtime_no）、`idx_employee_id`（employee_id）、`idx_status`（status）
- **hr_salaries**：`idx_salary_no`（salary_no）、`idx_employee_id`（employee_id）、`idx_status`（status）
- **hr_trainings**：`idx_training_no`（training_no）、`idx_status`（status）
- **hr_recruitments**：`idx_recruitment_no`（recruitment_no）、`idx_status`（status）
- **hr_resumes**：`idx_recruitment_id`（recruitment_id）、`idx_status`（status）

## 5. 关系定义

### 5.1 CRM模块关系
- **crm_accounts** ↔ **crm_contacts**：一对多（一个客户多个联系人）
- **crm_accounts** ↔ **crm_activities**：一对多（一个客户多个活动）
- **crm_accounts** ↔ **crm_cases**：一对多（一个客户多个反馈）
- **crm_accounts** ↔ **crm_opportunities**：一对多（一个客户多个销售机会）
- **crm_cases** ↔ **crm_case_comments**：一对多（一个反馈多个评论）

### 5.2 销售模块关系
- **sales_customers** ↔ **sales_quotes**：一对多（一个客户多个报价单）
- **sales_customers** ↔ **sales_orders**：一对多（一个客户多个订单）
- **sales_customers** ↔ **sales_deliveries**：一对多（一个客户多个发货单）
- **sales_customers** ↔ **sales_invoices**：一对多（一个客户多个发票）
- **sales_customers** ↔ **sales_returns**：一对多（一个客户多个退货单）
- **sales_products** ↔ **sales_quote_items**：一对多（一个产品多个报价单明细）
- **sales_products** ↔ **sales_order_items**：一对多（一个产品多个订单明细）
- **sales_products** ↔ **sales_delivery_items**：一对多（一个产品多个发货单明细）
- **sales_products** ↔ **sales_invoice_items**：一对多（一个产品多个发票明细）
- **sales_products** ↔ **sales_return_items**：一对多（一个产品多个退货单明细）
- **sales_quotes** ↔ **sales_quote_items**：一对多（一个报价单多个明细）
- **sales_orders** ↔ **sales_order_items**：一对多（一个订单多个明细）
- **sales_orders** ↔ **sales_deliveries**：一对多（一个订单多个发货单）
- **sales_orders** ↔ **sales_invoices**：一对多（一个订单多个发票）
- **sales_orders** ↔ **sales_returns**：一对多（一个订单多个退货单）
- **sales_deliveries** ↔ **sales_delivery_items**：一对多（一个发货单多个明细）
- **sales_invoices** ↔ **sales_invoice_items**：一对多（一个发票多个明细）
- **sales_returns** ↔ **sales_return_items**：一对多（一个退货单多个明细）

### 5.3 库存模块关系
- **inventory_warehouses** ↔ **inventory_locations**：一对多（一个仓库多个库位）
- **inventory_warehouses** ↔ **inventory_on_hand**：一对多（一个仓库多个库存记录）
- **inventory_warehouses** ↔ **inventory_transactions**：一对多（一个仓库多个库存交易）
- **inventory_locations** ↔ **inventory_on_hand**：一对多（一个库位多个库存记录）
- **inventory_locations** ↔ **inventory_transactions**：一对多（一个库位多个库存交易）
- **inventory_items** ↔ **inventory_on_hand**：一对多（一个物料多个库存记录）
- **inventory_items** ↔ **inventory_transactions**：一对多（一个物料多个库存交易）
- **inventory_items** ↔ **inventory_count_items**：一对多（一个物料多个盘点明细）
- **inventory_counts** ↔ **inventory_count_items**：一对多（一个盘点单多个明细）

### 5.4 采购模块关系
- **purchase_vendors** ↔ **purchase_orders**：一对多（一个供应商多个采购订单）
- **purchase_vendors** ↔ **purchase_receipts**：一对多（一个供应商多个收货单）
- **purchase_vendors** ↔ **purchase_invoices**：一对多（一个供应商多个发票）
- **purchase_vendors** ↔ **purchase_returns**：一对多（一个供应商多个退货单）
- **purchase_plans** ↔ **purchase_plan_items**：一对多（一个采购计划多个明细）
- **purchase_orders** ↔ **purchase_order_items**：一对多（一个采购订单多个明细）
- **purchase_orders** ↔ **purchase_receipts**：一对多（一个采购订单多个收货单）
- **purchase_orders** ↔ **purchase_invoices**：一对多（一个采购订单多个发票）
- **purchase_orders** ↔ **purchase_returns**：一对多（一个采购订单多个退货单）
- **purchase_receipts** ↔ **purchase_receipt_items**：一对多（一个收货单多个明细）
- **purchase_invoices** ↔ **purchase_invoice_items**：一对多（一个发票多个明细）
- **purchase_returns** ↔ **purchase_return_items**：一对多（一个退货单多个明细）
- **inventory_items** ↔ **purchase_plan_items**：一对多（一个物料多个采购计划明细）
- **inventory_items** ↔ **purchase_order_items**：一对多（一个物料多个采购订单明细）
- **inventory_items** ↔ **purchase_receipt_items**：一对多（一个物料多个收货单明细）
- **inventory_items** ↔ **purchase_invoice_items**：一对多（一个物料多个发票明细）
- **inventory_items** ↔ **purchase_return_items**：一对多（一个物料多个退货单明细）

### 5.5 财务模块关系
- **finance_accounts** ↔ **finance_journal_items**：一对多（一个会计科目多个凭证明细）
- **finance_journals** ↔ **finance_journal_items**：一对多（一个凭证多个明细）
- **finance_budgets** ↔ **finance_budget_items**：一对多（一个预算多个明细）

### 5.6 生产模块关系
- **sales_products** ↔ **production_mps**：一对多（一个产品多个主生产计划）
- **inventory_items** ↔ **production_mrp**：一对多（一个物料多个物料需求计划）
- **sales_products** ↔ **production_boms**：一对多（一个产品多个物料清单）
- **inventory_items** ↔ **production_bom_items**：一对多（一个物料多个物料清单明细）
- **production_boms** ↔ **production_bom_items**：一对多（一个物料清单多个明细）
- **sales_products** ↔ **production_orders**：一对多（一个产品多个生产订单）
- **production_boms** ↔ **production_orders**：一对多（一个物料清单多个生产订单）
- **production_routings** ↔ **production_orders**：一对多（一个工艺路线多个生产订单）
- **production_orders** ↔ **production_work_orders**：一对多（一个生产订单多个生产工单）
- **production_routings** ↔ **production_routing_operations**：一对多（一个工艺路线多个工序）
- **production_work_centers** ↔ **production_routing_operations**：一对多（一个工作中心多个工序）
- **production_work_centers** ↔ **production_work_orders**：一对多（一个工作中心多个生产工单）

### 5.7 人力资源模块关系
- **hr_departments** ↔ **hr_employees**：一对多（一个部门多个员工）
- **hr_positions** ↔ **hr_employees**：一对多（一个职位多个员工）
- **hr_employees** ↔ **hr_attendances**：一对多（一个员工多个考勤记录）
- **hr_employees** ↔ **hr_leaves**：一对多（一个员工多个请假记录）
- **hr_employees** ↔ **hr_overtimes**：一对多（一个员工多个加班记录）
- **hr_employees** ↔ **hr_salaries**：一对多（一个员工多个薪资记录）
- **hr_employees** ↔ **hr_training_participants**：一对多（一个员工多个培训参与记录）
- **hr_departments** ↔ **hr_positions**：一对多（一个部门多个职位）
- **hr_departments** ↔ **hr_recruitments**：一对多（一个部门多个招聘需求）
- **hr_positions** ↔ **hr_recruitments**：一对多（一个职位多个招聘需求）
- **hr_recruitments** ↔ **hr_resumes**：一对多（一个招聘需求多个简历）
- **hr_trainings** ↔ **hr_training_participants**：一对多（一个培训多个参与记录）

## 6. 数据库配置建议

### 6.1 MySQL配置
- **innodb_buffer_pool_size**：建议设置为服务器内存的70-80%
- **innodb_log_file_size**：建议设置为256M-512M
- **innodb_file_per_table**：建议开启
- **max_connections**：根据实际并发需求设置，建议500-1000
- **query_cache_size**：建议设置为0（MySQL 8.0已废弃）
- **sort_buffer_size**：建议设置为2M
- **read_buffer_size**：建议设置为1M
- **read_rnd_buffer_size**：建议设置为4M

### 6.2 存储引擎
- 所有表建议使用InnoDB存储引擎，支持事务和外键约束

### 6.3 字符集
- 数据库默认字符集：utf8mb4
- 排序规则：utf8mb4_unicode_ci

## 7. 总结

本文档详细定义了ERP系统的数据库设计，包括表结构、字段定义、索引设计和关系定义。设计覆盖了CRM、销售、库存、采购、财务、生产和人力资源七个核心模块，确保系统数据模型的一致性和完整性。

数据库设计遵循第三范式（3NF），确保数据的一致性和完整性，同时合理使用冗余字段和索引优化查询性能。表名和字段名采用小写字母加下划线的命名规范，确保命名的一致性和可读性。

本设计为后端开发和数据库管理员提供了明确的数据库设计规范，确保系统集成的顺利进行。